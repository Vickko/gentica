# LLM Tools 功能总结

## 文件操作工具

### View (`view`)
**功能**：读取并显示文件内容，带行号显示
**使用时机**：
- 需要查看特定文件的内容时
- 检查源代码、配置文件或日志文件
- 支持分段读取大文件（通过 offset 和 limit 参数）
**特点**：
- 最大文件大小限制 250KB
- 默认读取前 2000 行
- 超长行自动截断（2000 字符）
- 自动识别图片文件但不显示内容

### Write (`write`)
**功能**：创建新文件或完全覆写现有文件
**使用时机**：
- 需要创建全新文件
- 用修改后的完整内容替换整个文件
- 保存生成的代码、配置或文本数据
**特点**：
- 自动创建父目录
- 检测文件修改冲突
- 避免重复写入相同内容

### Edit (`edit`)
**功能**：对文件进行精确的文本替换操作
**使用时机**：
- 需要在文件中替换特定文本片段
- 创建新文件（old_string 为空）
- 删除特定内容（new_string 为空）
**特点**：
- 要求 old_string 在文件中唯一（或使用 replace_all）
- 支持单次或全部替换
- 原子操作，失败则不修改文件

### MultiEdit (`multiedit`)
**功能**：对同一文件执行多个连续的编辑操作
**使用时机**：
- 需要对同一文件进行多处修改
- 批量重命名变量或函数
- 复杂的文件重构操作
**特点**：
- 按顺序应用所有编辑
- 每个编辑基于前一个编辑的结果
- 原子性：要么全部成功，要么全部不执行

## 搜索工具

### Glob (`glob`)
**功能**：通过文件名模式查找文件路径
**使用时机**：
- 按文件名或扩展名查找文件
- 查找符合特定命名规则的文件
- 发现项目中的特定类型文件
**特点**：
- 支持 `*`、`**`、`?`、`[...]` 等通配符
- 结果按修改时间排序（最新优先）
- 最多返回 100 个文件
- 自动跳过隐藏文件

### Grep (`grep`)
**功能**：在文件内容中搜索文本或正则表达式
**使用时机**：
- 查找包含特定代码、函数或变量的文件
- 搜索错误信息或API调用
- 定位特定模式的代码实现
**特点**：
- 支持正则表达式或字面文本搜索（literal_text=true）
- 优先使用 ripgrep（rg）以提升性能
- 可通过 include 参数限定文件类型
- 结果按修改时间排序

### LS (`ls`)
**功能**：以树形结构显示目录内容
**使用时机**：
- 探索项目结构
- 了解目录组织方式
- 初次接触新代码库时的快速浏览
**特点**：
- 层次化树形显示
- 自动跳过隐藏文件和系统目录
- 最多显示 1000 个文件
- 支持忽略特定模式

## 搜索工具的使用区别

- **Glob vs Grep**：
  - Glob 搜索文件名/路径，Grep 搜索文件内容
  - Glob 用于"找到所有 .js 文件"，Grep 用于"找到包含 useState 的文件"
  
- **LS vs Glob**：
  - LS 展示目录结构，Glob 搜索特定文件
  - LS 用于浏览和理解项目布局，Glob 用于精确定位文件

- **View vs Write vs Edit**：
  - View 只读不修改
  - Write 完全重写整个文件
  - Edit 精确修改文件的特定部分

## 网络工具

### Fetch (`fetch`)
**功能**：从 URL 获取内容并返回文本或原始格式
**使用时机**：
- 获取API响应
- 下载网页内容或文档
- 获取外部信息辅助任务
**特点**：
- 支持 text 和 raw 两种输出格式
- 最大响应 5MB
- 自动处理重定向
- 内容限制为 250KB

### Download (`download`)
**功能**：下载二进制文件并保存到本地
**使用时机**：
- 下载图片、文档或其他二进制文件
- 保存远程资源到本地处理
- 获取项目依赖的外部文件
**特点**：
- 支持大文件流式下载
- 最大文件 100MB
- 自动创建目标目录
- 会覆盖已存在文件

### Sourcegraph (`sourcegraph`)
**功能**：搜索公开代码库中的代码
**使用时机**：
- 研究开源项目的实现方式
- 查找代码示例和最佳实践
- 了解特定API或库的使用方法
**特点**：
- 使用 Sourcegraph GraphQL API
- 支持复杂查询语法（正则、文件过滤、仓库过滤等）
- 最多返回 20 个结果
- 仅搜索公开仓库

## 网络工具的使用区别

- **Fetch vs Download**：
  - Fetch 用于文本内容，返回为字符串
  - Download 用于二进制文件，保存到磁盘
  
- **Sourcegraph vs Grep**：
  - Sourcegraph 搜索全球公开代码库
  - Grep 搜索本地文件系统

## 系统工具

### Bash (`bash`)
**功能**：在 shell 环境中执行命令
**使用时机**：
- 运行构建命令、测试或其他 CLI 工具
- 执行系统操作和文件管理
- 自动化脚本执行
**特点**：
- 默认超时 1 分钟，最大 10 分钟
- 捕获 stdout 和 stderr
- 输出限制 30000 字符
- 禁止某些危险命令（curl、wget、sudo 等）

## 工具选择建议

### 文件探索流程
1. **初识项目**：使用 `LS` 了解目录结构
2. **定位文件**：使用 `Glob` 查找特定类型文件
3. **搜索内容**：使用 `Grep` 在文件中搜索关键代码
4. **查看文件**：使用 `View` 阅读具体文件内容
5. **修改文件**：
   - 小改动用 `Edit`
   - 多处改动用 `MultiEdit`
   - 全新内容用 `Write`

### 性能优化建议
- 优先使用 `Glob` 缩小搜索范围，再用 `Grep` 搜索内容
- 对于迭代式探索任务，考虑使用 Agent 工具
- 文件修改前先用 `View` 了解内容，避免冲突

### 跨平台注意事项
- 所有工具自动处理 Windows/Unix 路径差异
- 文件路径使用正斜杠（/）以保证兼容性
- Windows 上某些 bash 命令可能不可用